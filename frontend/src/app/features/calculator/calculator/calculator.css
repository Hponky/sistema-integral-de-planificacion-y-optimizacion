/**
 * ===================================
 * ESTILOS DEL COMPONENTE CALCULADORA
 * ===================================
 * 
 * Aplicación del sistema de diseño SIPO al componente
 * de calculadora con Angular Material
 */

/* ===================================
 * OVERRIDES DE FORMULARIOS (SIPO THEME)
 * ===================================
 *
 * NOTA: Debido a un problema con la carga de estilos globales en este proyecto,
 * los overrides de Material se definen aquí usando ::ng-deep.
 * En un proyecto con configuración estándar, estos estilos deberían
 * estar en design-system.css sin ::ng-deep.
 */

/* Contenedor principal del stepper para mejorar el layout */
.sipo-stepper-wrapper {
  background-color: var(--sipo-color-surface-50);
  border: 1px solid var(--sipo-color-surface-200);
  border-radius: var(--sipo-radius-lg);
  padding: var(--sipo-space-8);
  box-shadow: var(--sipo-shadow-3);
}

/* Mejorar espaciado entre pasos del stepper */
::ng-deep mat-vertical-stepper .mat-step {
  margin-bottom: var(--sipo-space-6);
}

::ng-deep mat-vertical-stepper .mat-step:last-child {
  margin-bottom: 0;
}

/* Estilos para mat-form-field con apariencia 'outline' */
::ng-deep .mat-mdc-form-field-appearance-outline .mat-mdc-form-field-flex {
  background-color: var(--sipo-color-surface-50) !important;
  border-radius: var(--sipo-radius-lg) !important;
  transition: all var(--sipo-transition-normal) !important;
}

/* Corrección del borde por defecto */
::ng-deep .mat-mdc-form-field-appearance-outline .mat-mdc-form-field-outline {
  color: var(--sipo-color-surface-300) !important;
}

/* Estado enfoque (focus) para los campos de formulario */
::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-outline-thick {
  color: var(--sipo-color-primary-600) !important;
}

::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-outline-start,
::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-outline-gap,
::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-form-field-outline-end {
  border-color: var(--sipo-color-primary-600) !important;
}

::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-floating-label {
  color: var(--sipo-color-primary-600) !important;
  font-weight: var(--sipo-font-weight-semibold) !important;
}

/* Estado inválido (error) para los campos de formulario */
::ng-deep .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-form-field-outline-thick {
  color: var(--sipo-color-error-600) !important;
}

::ng-deep .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-form-field-outline-start,
::ng-deep .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-form-field-outline-gap,
::ng-deep .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-form-field-outline-end {
  border-color: var(--sipo-color-error-600) !important;
}

::ng-deep .mat-mdc-form-field.mat-form-field-invalid .mat-mdc-floating-label {
  color: var(--sipo-color-error-600) !important;
}

/* Estilos para los labels flotantes */
::ng-deep .mat-mdc-form-field-label {
  color: var(--sipo-color-surface-600) !important;
  font-weight: var(--sipo-font-weight-medium) !important;
}

/* Estilos para los inputs dentro de los form fields */
::ng-deep .mat-mdc-text-field-input {
  color: var(--sipo-color-surface-900) !important;
  font-size: var(--sipo-font-size-base) !important;
  padding-top: var(--sipo-space-1) !important;
}

/* Estilos para los hints y mensajes de error */
::ng-deep .mat-mdc-form-field-hint {
  color: var(--sipo-color-surface-500) !important;
  font-size: var(--sipo-font-size-sm) !important;
}

::ng-deep .mat-mdc-form-field-error {
  color: var(--sipo-color-error-600) !important;
  font-size: var(--sipo-font-size-sm) !important;
  font-weight: var(--sipo-font-weight-medium) !important;
  display: flex !important;
  align-items: center !important;
  gap: var(--sipo-space-1) !important;
  margin-top: var(--sipo-space-1) !important;
}

/* Estilos para el componente de carga de archivos */
.file-upload-area {
  margin-top: var(--sipo-space-4);
}

.file-input-container {
  display: flex;
  flex-direction: column;
  gap: var(--sipo-space-3);
}

.file-input {
  display: none;
}

.file-input-label {
  display: flex;
  align-items: center;
  padding: var(--sipo-space-3) var(--sipo-space-4);
  background-color: var(--sipo-color-surface-50);
  border: 2px dashed var(--sipo-color-surface-300);
  border-radius: var(--sipo-radius-base);
  color: var(--sipo-color-surface-700);
  font-weight: var(--sipo-font-weight-medium);
  cursor: pointer;
  transition: var(--sipo-transition-normal);
}

.file-input-label:hover {
  border-color: var(--sipo-color-primary-400);
  background-color: var(--sipo-color-primary-50);
  color: var(--sipo-color-primary-700);
}

.file-select-button {
  align-self: flex-start;
}

.file-input-hint {
  display: flex;
  align-items: center;
  font-size: var(--sipo-font-size-sm);
  color: var(--sipo-color-surface-600);
  background-color: var(--sipo-color-info-50);
  padding: var(--sipo-space-2) var(--sipo-space-3);
  border-radius: var(--sipo-radius-base);
  border: 1px solid var(--sipo-color-info-200);
}

/* Estilo para spinner blanco dentro de botones primarios (UX) */
.sipo-spinner-white.mat-mdc-progress-spinner {
  --mdc-circular-progress-active-indicator-color: var(--sipo-color-surface-50);
}

/* Responsive para el componente de archivo */
@media (max-width: 768px) {
  .file-input-container {
    gap: var(--sipo-space-2);
  }
  
  .file-input-label {
    padding: var(--sipo-space-2) var(--sipo-space-3);
    font-size: var(--sipo-font-size-sm);
  }
  
  .file-select-button {
    width: 100%;
  }
}

/* Accesibilidad para el componente de archivo */
@media (prefers-reduced-motion: reduce) {
  .file-input-label {
    transition: none;
  }
}

@media (prefers-contrast: high) {
  .file-input-label {
    border-width: 3px;
  }
}
/**
 * ===================================
 * TEMA DE ANGULAR MATERIAL PERSONALIZADO
 * ===================================
 * 
 * Este archivo configura Angular Material para usar
 * la paleta de colores del sistema de diseño SIPO
 * basada en morado y cumpliendo WCAG 2.2 AA
 */

/* Importación de temas base de Angular Material */
@import '@angular/material/theming';

/* ===================================
 * DEFINICIÓN DE PALETAS PERSONALIZADAS
 * =================================== */

/* Paleta primaria (morado) */
$sipo-primary-palette: (
  50: #F5F3FF,
  100: #EDE9FE,
  200: #DDD6FE,
  300: #C4B5FD,
  400: #A78BFA,
  500: #8B5CF6,
  600: #7C3AED,  // Color primario principal
  700: #6D28D9,
  800: #5B21B6,
  900: #4C1D95,
  A100: #EDE9FE,
  A200: #C4B5FD,
  A400: #8B5CF6,
  A700: #7C3AED,
  contrast: (
    50: #4C1D95,
    100: #4C1D95,
    200: #4C1D95,
    300: #4C1D95,
    400: #4C1D95,
    500: #FFFFFF,
    600: #FFFFFF,
    700: #FFFFFF,
    800: #FFFFFF,
    900: #FFFFFF,
    A100: #4C1D95,
    A200: #4C1D95,
    A400: #FFFFFF,
    A700: #FFFFFF,
  )
);

/* Paleta de acento (secundaria) */
$sipo-accent-palette: (
  50: #F8FAFC,
  100: #F1F5F9,
  200: #E2E8F0,
  300: #CBD5E1,
  400: #94A3B8,
  500: #64748B,
  600: #475569,
  700: #334155,
  800: #1E293B,
  900: #0F172A,
  A100: #CBD5E1,
  A200: #94A3B8,
  A400: #475569,
  A700: #334155,
  contrast: (
    50: #0F172A,
    100: #0F172A,
    200: #0F172A,
    300: #0F172A,
    400: #0F172A,
    500: #FFFFFF,
    600: #FFFFFF,
    700: #FFFFFF,
    800: #FFFFFF,
    900: #FFFFFF,
    A100: #0F172A,
    A200: #0F172A,
    A400: #FFFFFF,
    A700: #FFFFFF,
  )
);

/* Paleta de advertencia */
$sipo-warn-palette: (
  50: #FFFBEB,
  100: #FEF3C7,
  200: #FDE68A,
  300: #FCD34D,
  400: #FBBF24,
  500: #F59E0B,
  600: #D97706,
  700: #B45309,
  800: #92400E,
  900: #78350F,
  A100: #FEF3C7,
  A200: #FCD34D,
  A400: #F59E0B,
  A700: #D97706,
  contrast: (
    50: #78350F,
    100: #78350F,
    200: #78350F,
    300: #78350F,
    400: #78350F,
    500: #FFFFFF,
    600: #FFFFFF,
    700: #FFFFFF,
    800: #FFFFFF,
    900: #FFFFFF,
    A100: #78350F,
    A200: #78350F,
    A400: #FFFFFF,
    A700: #FFFFFF,
  )
);

/* ===================================
 * CREACIÓN DEL TEMA PERSONALIZADO
 * =================================== */

$sipo-theme-primary: mat-palette($sipo-primary-palette, 600, 500, 700);
$sipo-theme-accent: mat-palette($sipo-accent-palette, 600, 500, 700);
$sipo-theme-warn: mat-palette($sipo-warn-palette, 600);

$sipo-theme: mat-light-theme((
  color: (
    primary: $sipo-theme-primary,
    accent: $sipo-theme-accent,
    warn: $sipo-theme-warn,
  ),
  typography: mat-typography-config(),
  density: 0,
));

/* ===================================
 * APLICACIÓN DEL TEMA
 * =================================== */

@include mat-core();

@include angular-material-theme($sipo-theme);

/* ===================================
 * TEMA OSCURO (FUTURO)
 * =================================== */

$sipo-dark-theme: mat-dark-theme((
  color: (
    primary: $sipo-theme-primary,
    accent: $sipo-theme-accent,
    warn: $sipo-theme-warn,
  ),
  typography: mat-typography-config(),
  density: 0,
));

.dark-theme {
  @include angular-material-theme($sipo-dark-theme);
}

/* ===================================
 * PERSONALIZACIÓN DE COMPONENTES ESPECÍFICOS
 * =================================== */

/* Botones personalizados */
.mat-mdc-raised-button {
  border-radius: var(--sipo-radius-base);
  font-weight: var(--sipo-font-weight-medium);
  text-transform: none;
  box-shadow: var(--sipo-shadow-2);
  transition: var(--sipo-transition-normal);
}

.mat-mdc-raised-button:hover {
  box-shadow: var(--sipo-shadow-3);
}

.mat-mdc-outlined-button {
  border-radius: var(--sipo-radius-base);
  font-weight: var(--sipo-font-weight-medium);
  text-transform: none;
  border-width: 2px;
}

/* Campos de formulario */
.mat-mdc-form-field {
  font-family: var(--sipo-font-family-primary);
}

.mat-mdc-text-field-wrapper {
  border-radius: var(--sipo-radius-base);
}

.mat-mdc-form-field-focus-overlay {
  border-radius: var(--sipo-radius-base);
}

.mat-mdc-input-element {
  font-family: var(--sipo-font-family-primary);
  font-size: var(--sipo-font-size-base);
}

/* Tarjetas */
.mat-mdc-card {
  border-radius: var(--sipo-radius-lg);
  box-shadow: var(--sipo-shadow-1);
  transition: var(--sipo-transition-normal);
}

.mat-mdc-card:hover {
  box-shadow: var(--sipo-shadow-2);
}

/* Chips */
.mat-mdc-chip {
  border-radius: var(--sipo-radius-full);
  font-weight: var(--sipo-font-weight-medium);
}

/* Tabs */
.mat-mdc-tab {
  font-weight: var(--sipo-font-weight-medium);
  text-transform: none;
}

.mat-mdc-tab-group {
  border-radius: var(--sipo-radius-lg);
}

/* Diálogos */
.mat-mdc-dialog-container {
  border-radius: var(--sipo-radius-lg);
  box-shadow: var(--sipo-shadow-6);
}

/* Snackbars */
.mat-mdc-snack-bar-container {
  border-radius: var(--sipo-radius-base);
  box-shadow: var(--sipo-shadow-4);
}

/* Progress spinner */
.mat-mdc-progress-spinner circle {
  stroke: var(--sipo-color-primary-600);
}

/* Table */
.mat-mdc-table {
  font-family: var(--sipo-font-family-primary);
}

.mat-mdc-header-cell {
  font-weight: var(--sipo-font-weight-semibold);
  color: var(--sipo-color-surface-700);
}

.mat-mdc-cell {
  color: var(--sipo-color-surface-600);
}

/* Paginator */
.mat-mdc-paginator {
  font-family: var(--sipo-font-family-primary);
}

/* Select */
.mat-mdc-select-value {
  font-family: var(--sipo-font-family-primary);
}

/* Checkbox */
.mat-mdc-checkbox .mdc-checkbox__background {
  border-radius: var(--sipo-radius-sm);
}

/* Radio button */
.mat-mdc-radio-button .mdc-radio__outer-circle {
  border-color: var(--sipo-color-surface-400);
}

.mat-mdc-radio-button .mdc-radio__inner-circle {
  background-color: var(--sipo-color-primary-600);
}

/* Slider */
.mat-mdc-slider {
  --mdc-theme-primary: var(--sipo-color-primary-600);
}

/* Datepicker */
.mat-mdc-calendar-table-header {
  background-color: var(--sipo-color-primary-600);
  color: var(--sipo-color-surface-50);
}

.mat-mdc-calendar-body-selected {
  background-color: var(--sipo-color-primary-600);
  color: var(--sipo-color-surface-50);
}

/* ===================================
 * RESPONSIVE DESIGN
 * =================================== */

@media (max-width: 768px) {
  .mat-mdc-card {
    margin: var(--sipo-space-2);
    padding: var(--sipo-space-4);
  }
  
  .mat-mdc-dialog-container {
    max-width: 90vw;
    margin: var(--sipo-space-4);
  }
}

/* ===================================
 * ACCESIBILIDAD MEJORADA
 * =================================== */

/* Alto contraste para mejor accesibilidad */
@media (prefers-contrast: high) {
  .mat-mdc-raised-button {
    border: 2px solid currentColor;
  }
  
  .mat-mdc-outlined-button {
    border-width: 3px;
  }
  
  .mat-mdc-form-field-focus-overlay {
    border-width: 2px;
  }
}

/* Reducir movimiento para usuarios que lo prefieren */
@media (prefers-reduced-motion: reduce) {
  .mat-mdc-raised-button,
  .mat-mdc-card,
  .mat-mdc-snack-bar-container {
    transition: none;
  }
}

/* ===================================
 * CLASES UTILITARIAS PARA SNACKBARS
 * =================================== */

.success-snackbar {
  background-color: var(--sipo-color-success-600) !important;
  color: var(--sipo-color-surface-50) !important;
}

.error-snackbar {
  background-color: var(--sipo-color-error-600) !important;
  color: var(--sipo-color-surface-50) !important;
}

.warning-snackbar {
  background-color: var(--sipo-color-warning-600) !important;
  color: var(--sipo-color-surface-50) !important;
}

.info-snackbar {
  background-color: var(--sipo-color-info-600) !important;
  color: var(--sipo-color-surface-50) !important;
}

/* Mejoras de accesibilidad para stepper */
.mat-horizontal-stepper-header {
  height: 72px !important;
}

.mat-step-icon {
  width: 48px !important;
  height: 48px !important;
  font-size: 20px !important;
}

.mat-step-label {
  font-size: 14px !important;
  font-weight: 500 !important;
}

/* Mejoras para tablas */
.mat-mdc-table {
  border-radius: var(--sipo-radius-base);
  overflow: hidden;
}

.mat-mdc-header-row {
  background-color: var(--sipo-color-surface-100);
}

.mat-mdc-header-cell {
  font-weight: var(--sipo-font-weight-semibold);
  color: var(--sipo-color-surface-700);
}

.mat-mdc-row:hover {
  background-color: var(--sipo-color-primary-50);
}

/* Mejoras para formularios */
.mat-mdc-form-field-appearance-outline {
  --mdc-outlined-text-field-outline-color: var(--sipo-color-surface-300);
  --mdc-outlined-text-field-focus-outline-color: var(--sipo-color-primary-500);
  --mdc-outlined-text-field-hover-outline-color: var(--sipo-color-primary-400);
}

.mat-mdc-form-field-appearance-outline.mat-focused .mat-mdc-form-field-outline {
  color: var(--sipo-color-primary-500);
}

.mat-mdc-form-field-appearance-outline.mat-mdc-form-field-invalid .mat-mdc-form-field-outline {
  color: var(--sipo-color-error-500);
}

/* Mejoras para botones */
.mat-mdc-raised-button[disabled] {
  background-color: var(--sipo-color-surface-300) !important;
  color: var(--sipo-color-surface-500) !important;
  opacity: 0.6 !important;
}

.mat-mdc-stroked-button[disabled] {
  border-color: var(--sipo-color-surface-300) !important;
  color: var(--sipo-color-surface-400) !important;
}

/* Mejoras para progress bar */
.mat-mdc-progress-bar {
  --mdc-linear-progress-active-indicator-color: var(--sipo-color-primary-600);
}

.mat-mdc-progress-bar .mdc-linear-progress__buffer {
  background-color: var(--sipo-color-primary-100);
}